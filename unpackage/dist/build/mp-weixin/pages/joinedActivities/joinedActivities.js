(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/joinedActivities/joinedActivities"],{"14bd":function(t,e,n){"use strict";var i=n("4da0"),a=n.n(i);a.a},"1b9d":function(t,e,n){"use strict";n.r(e);var i=n("be1f"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"4da0":function(t,e,n){},"5e92":function(t,e,n){"use strict";n.r(e);var i=n("85e0"),a=n("1b9d");for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("14bd");var o=n("828b"),u=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=u.exports},"85e0":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.loading?null:t.joinedList.length),i=t.loading||0===n?null:t.__map(t.joinedList,(function(e,n){var i=t.__get_orig(e),a=t.buildAddress(e);return{$orig:i,m0:a}}));t.$mp.data=Object.assign({},{$root:{g0:n,l0:i}})},a=[]},be1f:function(t,e,n){"use strict";(function(t,i){var a=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("7eb4")),o=a(n("ee10")),u={data:function(){return{loading:!1,allList:[],joinedList:[]}},onShow:function(){this.fetchJoined()},onPullDownRefresh:function(){this.fetchJoined().finally((function(){return t.stopPullDownRefresh()}))},methods:{buildAddress:function(t){var e=t.area||"",n=t.location||"";if(e||n){var i=n?" "+n:"";return"广东省广州市".concat(e).concat(i)}return"未设置"},fetchJoined:function(){var e=this;return(0,o.default)(r.default.mark((function n(){var a,o,u,c;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.loading=!0,n.prev=1,a=t.getStorageSync("username")||"",a){n.next=6;break}return e.joinedList=[],n.abrupt("return");case 6:return n.next=8,i.callFunction({name:"getActivities",data:{}});case 8:o=n.sent,u=o&&o.result&&o.result.data||[],c=u.map((function(t){return{id:t.id||t._id||"",name:t.name||"未命名活动",date:t.date||"",timeSlot:t.timeSlot||"",totalPeople:t.totalPeople||0,joinedPeople:t.joinedPeople||0,area:t.area||"",location:t.location||"",participants:Array.isArray(t.participants)?t.participants:[]}})),e.allList=c,e.joinedList=c.filter((function(t){return t.participants.some((function(t){return String(t&&t.username)===String(a)}))})),n.next=19;break;case 15:n.prev=15,n.t0=n["catch"](1),console.error("加载加入的活动失败:",n.t0),t.showToast({title:"加载失败",icon:"none"});case 19:return n.prev=19,e.loading=!1,n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[1,15,19,22]])})))()},goDetail:function(e){e&&e.id&&t.navigateTo({url:"/pages/detailActivity/detailActivity?id=".concat(encodeURIComponent(e.id))})}}};e.default=u}).call(this,n("df3c")["default"],n("861b")["uniCloud"])},eba4:function(t,e,n){"use strict";(function(t,e){var i=n("47a9");n("d909"),n("861b");i(n("3240"));var a=i(n("5e92"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["eba4","common/runtime","common/vendor"]]]);