(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/settings/settings"],{"26fd":function(e,n,t){"use strict";(function(e,o){var r=t("47a9");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=r(t("7eb4")),s=r(t("ee10")),u={data:function(){return{newPassword:"",confirmPassword:"",showNew:!1,showConfirm:!1}},computed:{canSubmit:function(){var e=this.newPassword||"",n=this.confirmPassword||"";return e.length>=6&&e.length<=20&&e===n}},methods:{onSubmit:function(){var n=this;return(0,s.default)(a.default.mark((function t(){var r,s,u,i;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.canSubmit){t.next=3;break}return e.showToast({title:"请完整填写并确认新密码",icon:"none"}),t.abrupt("return");case 3:if(r=e.getStorageSync("userInfo"),s=e.getStorageSync("username"),u=r&&r.username||s||"",u){t.next=10;break}return e.showToast({title:"未登录，请先登录",icon:"none"}),setTimeout((function(){e.navigateTo({url:"/pages/login/login"})}),800),t.abrupt("return");case 10:return t.prev=10,e.showLoading({title:"提交中...",mask:!0}),t.next=14,o.callFunction({name:"changePassword",data:{username:u,newPassword:n.newPassword},timeout:1e4});case 14:if(i=t.sent,e.hideLoading(),i&&i.result&&0===i.result.code){e.showToast({title:"密码修改成功",icon:"success"});try{e.removeStorageSync("userInfo"),e.removeStorageSync("currentUsername")}catch(a){}setTimeout((function(){e.reLaunch({url:"/pages/login/login"})}),800)}else e.showToast({title:i&&i.result&&i.result.message||"修改失败",icon:"none"});t.next=24;break;case 19:t.prev=19,t.t0=t["catch"](10),e.hideLoading(),console.error("修改密码失败:",t.t0),e.showToast({title:"失败: ".concat(t.t0.message||"网络错误"),icon:"none"});case 24:case"end":return t.stop()}}),t,null,[[10,19]])})))()}}};n.default=u}).call(this,t("df3c")["default"],t("861b")["uniCloud"])},"3e27":function(e,n,t){"use strict";t.r(n);var o=t("f9b7"),r=t("fd08");for(var a in r)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(a);t("fefb");var s=t("828b"),u=Object(s["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);n["default"]=u.exports},e4c8:function(e,n,t){"use strict";(function(e,n){var o=t("47a9");t("d909"),t("861b");o(t("3240"));var r=o(t("3e27"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(r.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])},f7e1:function(e,n,t){},f9b7:function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){}));var o=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(n){e.showNew=!e.showNew},e.e1=function(n){e.showConfirm=!e.showConfirm})},r=[]},fd08:function(e,n,t){"use strict";t.r(n);var o=t("26fd"),r=t.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(a);n["default"]=r.a},fefb:function(e,n,t){"use strict";var o=t("f7e1"),r=t.n(o);r.a}},[["e4c8","common/runtime","common/vendor"]]]);